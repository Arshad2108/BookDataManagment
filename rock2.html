<!DOCTYPE html>
<html>
  <head>
    <title>Registration Page</title>
    <script>
      
      function mySubmit() {

          var str1 = document.getElementById("bookname").value;
          var str2 = document.getElementById("authorname").value;
          var str3 = document.getElementById("date").value;
          var str4 = document.getElementById("month").value;
          var str5 = document.getElementById("year").value;
          document.getElementById("txtHint2").innerHTML = str1+" "+str2+" "+str3+" "+str4+" "+str5;
          if (str1=='' || str2=='' || str3=='' || str4=='' || str5==''){
            alert("Please fill all the details");
          }
          else{
          
          var xmlhttp = new XMLHttpRequest();
          xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
              document.getElementById("txtHint2").innerHTML = this.responseText;
            }
          };
          xmlhttp.open("GET","connect.php?bookname="+str1+"&authorname="+str2+"&date="+str3+"&month="+str4+"&year="+str5,true);
          xmlhttp.send();
        }
          
        return;
      }
      function showOptions(str){
        if(str==""){
          document.getElementById("txtHint").innerHTML = "select an option";
          document.getElementById("datelabel").style.display="none";
            document.getElementById("checkdate").style.display="none";
            document.getElementById("monthlabel").style.display="none";
            document.getElementById("checkmonth").style.display="none";
            document.getElementById("yearlabel").style.display="none";
            document.getElementById("checkyear").style.display="none";
        }
        else{
          if (str=="date"){
            document.getElementById("datelabel").style.display="block";
            document.getElementById("checkdate").style.display="block";
            document.getElementById("monthlabel").style.display="block";
            document.getElementById("checkmonth").style.display="block";
            document.getElementById("yearlabel").style.display="block";
            document.getElementById("checkyear").style.display="block";


          }
          if (str=="month"){
            document.getElementById("datelabel").style.display="none";
            document.getElementById("checkdate").style.display="none";
            document.getElementById("monthlabel").style.display="block";
            document.getElementById("checkmonth").style.display="block";
            document.getElementById("yearlabel").style.display="block";
            document.getElementById("checkyear").style.display="block";

          }
          if (str=="year"){
            document.getElementById("datelabel").style.display="none";
            document.getElementById("checkdate").style.display="none";
            document.getElementById("monthlabel").style.display="none";
            document.getElementById("checkmonth").style.display="none";
            document.getElementById("yearlabel").style.display="block";
            document.getElementById("checkyear").style.display="block";

          }
        }
        return;

      }
      function showme() {
        var interval = document.getElementById("interval").value;
        var date = document.getElementById("checkdate").value;
          var month = document.getElementById("checkmonth").value;
          var year = document.getElementById("checkyear").value;
          document.getElementById("txtHint").innerHTML = interval+" "+date+" " +month+" "+ year;
          
          if(interval=="year"){
            if (year == "") {
              document.getElementById("txtHint1").innerHTML = "type the required info";
              return;
            } else {
              var xmlhttp = new XMLHttpRequest();
              xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                  document.getElementById("txtHint").innerHTML = this.responseText;
                }
              };
              xmlhttp.open("GET","getinfo.php?interval="+interval+"&year="+year,true);
              xmlhttp.send();
            }
          }
          

          else if(interval=="date"){
            if (date == "" || month == "" || year == "") {
              document.getElementById("txtHint1").innerHTML = "type the required info";
              return;
            } else {
              var xmlhttp = new XMLHttpRequest();
              xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                  document.getElementById("txtHint").innerHTML = this.responseText;
                }
              };
              xmlhttp.open("GET","getinfo.php?interval="+interval+"&date="+date+"&month="+month+"&year="+year,true);
              xmlhttp.send();
            }
          }
          
          else if(interval=="month"){
            if (month == "" || year == "") {
              document.getElementById("txtHint1").innerHTML = "type the required info";
              return;
            } else {
              var xmlhttp = new XMLHttpRequest();
              xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                  document.getElementById("txtHint").innerHTML = this.responseText;
                }
              };
              xmlhttp.open("GET","getinfo.php?interval="+interval+"&month="+month+"&year="+year,true);
              xmlhttp.send();
            }
          }

          else{
            document.getElementById("txtHint1").innerHTML = "type the required info";

          }
         
          
          return;
      }
  </script>
    
  </head>
  <body>
    <div class="container">
      <div class="row col-md-6 col-md-offset-3">
        <div class="panel panel-primary">
          <div class="panel-heading text-center">
            <h1>Registration Form</h1>
          </div>
          <div class="panel-body">
            <form id="sub">
              <div class="form-group">
                <label for="bookname">Book Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="bookname"
                  name="bookname"
                />
              </div>
              <div class="form-group">
                <label for="authorname">Author Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="authorname"
                  name="authorname"
                />
              </div>
             
              
              <div class="form-group">
                <label for="date">Date</label>
                <input
                  type="number"
                  class="form-control"
                  id="date"
                  name="date"
                />
              </div>
              <div class="form-group">
                <label for="month">Month</label>
                <input
                  type="number"
                  class="form-control"
                  id="month"
                  name="month"
                />
              </div>
              <div class="form-group">
                <label for="year">Year</label>
                <input
                  type="number"
                  class="form-control"
                  id="year"
                  name="year"
                />
              </div>
              <input id="buttoninsert" type="button" onclick="mySubmit()"  value="Submit" class="btn btn-primary" />
              <div id="txtHint2"><b>see  here...</b></div>
            </form>
          </div>
          <div class="panel-footer text-right">
            
          </div>
        </div>
      </div>
    </div>
    <br>
    <p>
    <div class="toast" role="alert" aria-live="assertive" aria-atomic="true">
  
  <form id="view">
<select  onchange="showOptions(this.value)" id="interval" >
  <option value="">Select time interval:</option>
  <option value="date">date</option>
  <option value="month">month</option>
  <option value="year">year</option>
  </select>
  
  <label id="datelabel" for="date" style="display:none">date</label>
  <input type="number" class="form-control" id="checkdate" name="date" style="display:none"/>
              
              
                <label id="monthlabel" for="month" style="display:none">month</label>
                <input
                  type="number"
                  class="form-control"
                  id="checkmonth"
                  name="month"
                  style="display:none"
                />
              
              
                <label id="yearlabel" for="year" style="display:none">year</label>
                <input
                  type="number"
                  class="form-control"
                  id="checkyear"
                  name="year"
                  style="display:none"
                />
          <input type="button" id="buttonview" onclick="showme()"  value="Submit" class="btn btn-primary" />    
</form>
<br>
<div id="txtHint1"><b>wait...</b></div>
<div id="txtHint"><b>Book info will be listed here...</b></div>


</div>
</p>

  </body>
</html>